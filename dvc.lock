schema: '2.0'
stages:
  build_image:
    cmd: ./build_image.sh && echo $(date) > last_build.log
    deps:
    - path: Dockerfile
      md5: 80349cbf96a46e00ae365c06637d7b46
      size: 574
    - path: build_image.sh
      md5: e8817aee860bb869e5b9fc89c63f7c11
      size: 428
    - path: gloves/
      md5: 1a9e8d0632f6bc30e69806477bc08e0c.dir
      size: 100608
      nfiles: 33
    - path: requirements.txt
      md5: d45f24d6fb70c1d7810cee36cea2a318
      size: 304
    outs:
    - path: last_build.log
      md5: a1ed12d459108b2281f864d1a721635b
      size: 32
  wget:
    cmd: "docker run -v ${PWD}:/gloves --user 1000:1000 etheredgeb/wget_url:latest\
      \ https://www.robots.ox.ac.uk/~vgg/data/pets/data/images.tar.gz /gloves/artifacts/wget\n"
    params:
      params.yaml:
        wget:
          img: etheredgeb/wget_url:latest
          data_url: https://www.robots.ox.ac.uk/~vgg/data/pets/data/images.tar.gz
          out_dir: wget
    outs:
    - path: artifacts/wget
      md5: dbd763779bfe15e4b6d824cfde1034e0.dir
      size: 791918971
      nfiles: 1
  untar:
    cmd: "docker run -v ${PWD}:/gloves --user 1000:1000 etheredgeb/untar_data:latest\
      \ xzvf  /gloves/artifacts/untar  /gloves/artifacts/wget images.tar.gz\n"
    deps:
    - path: artifacts/wget
      md5: dbd763779bfe15e4b6d824cfde1034e0.dir
      size: 791918971
      nfiles: 1
    params:
      params.yaml:
        untar:
          img: etheredgeb/untar_data:latest
          tar_args: xzvf
          data_dir: untar
          tar_file_name: images.tar.gz
        wget.out_dir: wget
    outs:
    - path: artifacts/untar
      md5: 277f608c70d7bd7991e0cd5f5cc845c6.dir
      size: 796502375
      nfiles: 7393
  clean:
    cmd: "docker run -v ${PWD}:/gloves --user 1000:1000 etheredgeb/clean_oxford_pet_data:latest\
      \ --data_dir /gloves/artifacts/untar --cleaned_dir_name /gloves/artifacts/clean\n"
    deps:
    - path: artifacts/untar
      md5: 277f608c70d7bd7991e0cd5f5cc845c6.dir
      size: 796502375
      nfiles: 7393
    params:
      params.yaml:
        clean:
          img: etheredgeb/clean_oxford_pet_data:latest
          out_dir: clean
        untar.data_dir: untar
    outs:
    - path: artifacts/clean
      md5: 4cd0b23585aa4eaa63096ca693c28879.dir
      size: 790897339
      nfiles: 7390
  split:
    cmd: "docker run -v ${PWD}:/gloves --user 1000:1000 etheredgeb/split_oxford_pet_data:latest\
      \ --data-dir /gloves/artifacts/clean --train-dir /gloves/artifacts/train --test-dir\
      \ /gloves/artifacts/test --ratio 0.1 --by-label False\n"
    deps:
    - path: artifacts/clean
      md5: 4cd0b23585aa4eaa63096ca693c28879.dir
      size: 790897339
      nfiles: 7390
    params:
      params.yaml:
        clean.out_dir: clean
        out_dir: artifacts
        split:
          img: etheredgeb/split_oxford_pet_data:latest
          train_dir: train
          test_dir: test
          ratio: 0.1
    outs:
    - path: artifacts/test
      md5: 7703a0c477d6314c567eb6cbf5b5dfde.dir
      size: 79106624
      nfiles: 739
    - path: artifacts/train
      md5: d0327c629f523260f1b2647575959af1.dir
      size: 711790715
      nfiles: 6651
  hydra:
    cmd: "docker run -v ${PWD}/artifacts:/outputs --user 1000:1000 --gpus all -e TF_FORCE_GPU_ALLOW_GROWTH=true\
      \  -e MLFLOW_EXPERIMENT_NAME=gloves -e AWS_ACCESS_KEY_ID=$AWS_ACCESS_KEY_ID\
      \ -e AWS_SECRET_ACCESS_KEY=$AWS_SECRET_ACCESS_KEY -e MLFLOW_S3_ENDPOINT_URL=$MLFLOW_S3_ENDPOINT_URL\
      \ -e MLFLOW_TRACKING_URI=$MLFLOW_TRACKING_URI -e MLFLOW_TRACKING_USERNAME=$MLFLOW_TRACKING_USERNAME\
      \ -e MLFLOW_TRACKING_PASSWORD=$MLFLOW_TRACKING_PASSWORD -e S3_ENDPOINT=$S3_ENDPOINT\
      \  etheredgeb/gloves:latest hydra.py --epochs 1\n"
    deps:
    - path: last_build.log
      md5: 1867ba7e77dd51e70aa5ae4b7333d0d0
      size: 32
    params:
      params.yaml:
        train.docker_args: --gpus all -e TF_FORCE_GPU_ALLOW_GROWTH=true  -e MLFLOW_EXPERIMENT_NAME=gloves
          -e AWS_ACCESS_KEY_ID=$AWS_ACCESS_KEY_ID -e AWS_SECRET_ACCESS_KEY=$AWS_SECRET_ACCESS_KEY
          -e MLFLOW_S3_ENDPOINT_URL=$MLFLOW_S3_ENDPOINT_URL -e MLFLOW_TRACKING_URI=$MLFLOW_TRACKING_URI
          -e MLFLOW_TRACKING_USERNAME=$MLFLOW_TRACKING_USERNAME -e MLFLOW_TRACKING_PASSWORD=$MLFLOW_TRACKING_PASSWORD
          -e S3_ENDPOINT=$S3_ENDPOINT
        train.img: etheredgeb/gloves:latest
  train_siamese:
    cmd: "python gloves/main.py --train-dir artifacts/train --test-dir artifacts/test\
      \ --sigmoid False --param-path params.yaml --param-parent-key siamese_distance\n"
    deps:
    - path: artifacts/test
      md5: 7703a0c477d6314c567eb6cbf5b5dfde.dir
      size: 79106624
      nfiles: 739
    - path: artifacts/train
      md5: d0327c629f523260f1b2647575959af1.dir
      size: 711790715
      nfiles: 6651
    - path: gloves/main.py
      md5: c41c97f71eaa988cc0f527e7cd5b3620
      size: 15953
    params:
      params.yaml:
        siamese_distance:
          src: gloves/main.py
          out_model_path: artifacts/distance_models/model
          out_encoder_path: artifacts/ distance_models/encoder
          out_metrics_path: siamese_distance_logs
          height: 224
          width: 224
          depth: 3
          mutate_anchor: true
          mutate_other: true
          dense_reg_rate: 0.001
          conv_reg_rate: 0.0001
          latent_nodes: 32
          final_activation: sigmoid
          lr: 0.0001
          optimizer: adam
          epochs: 1
          batch_size: 32
          verbose: 0
          eval_freq: 1
          reduce_lr_factor: 0.1
          reduce_lr_patience: 20
          early_stop_patience: 50
          mixed_precision: true
          nway_freq: 20
          nways: 32
          use_batch_norm: true
    outs:
    - path: artifacts/ distance_models/encoder
      md5: 48f32135d20a8eb55afb371dc01bb213.dir
      size: 28291754
      nfiles: 4
    - path: artifacts/distance_models/model
      md5: bb1d4288adcb57dc51ca102207dcd6ac.dir
      size: 82327806
      nfiles: 4
    - path: siamese_distance_logs
      md5: 408e0d491e69c653b9fafa218a4008b3.dir
      size: 598
      nfiles: 9
    - path: siamese_distance_logs.html
      md5: 46b36e86be4d4336d018ba9b6d24f468
      size: 9554
  classifier:
    cmd: "python gloves/classifier.py --encoder-model-path artifacts/encoder --train-dir\
      \ artifacts/train --test-dir artifacts/test --model-path artifacts/classifier_models\
      \ --label-encoder-path artifacts/label_encoder --epochs 4\n"
    deps:
    - path: artifacts/encoder
      md5: 82a898f4ff4f7bb43b62bc9d70f4626e.dir
      size: 28292401
      nfiles: 4
    - path: artifacts/test
      md5: 7703a0c477d6314c567eb6cbf5b5dfde.dir
      size: 79106624
      nfiles: 739
    - path: artifacts/train
      md5: d0327c629f523260f1b2647575959af1.dir
      size: 711790715
      nfiles: 6651
    - path: gloves/classifier.py
      md5: 58c1d378297d2ceab690713bf44f6214
      size: 7549
    params:
      params.yaml:
        classifier:
          train_dir: train
          test_dir: train
          model_dir: classifier_models
          model_filename: model
          label_encoder: label_encoder
          encoder: models/encoder
          epochs: 4
        split.train_dir: train
        train.encoder: encoder
    outs:
    - path: artifacts/classifier_models
      md5: 9490d3260480e1fbb117eab2d42930b8.dir
      size: 548183467
      nfiles: 16
    - path: artifacts/label_encoder
      md5: 04389aba6461b8869ba4c8f267b430bd
      size: 1338
  train_siamese_distance:
    cmd: "python gloves/main.py --train-dir artifacts/train --test-dir artifacts/test\
      \ --sigmoid False --param-path params.yaml --param-parent-key siamese_distance\n"
    deps:
    - path: artifacts/test
      md5: 7703a0c477d6314c567eb6cbf5b5dfde.dir
      size: 79106624
      nfiles: 739
    - path: artifacts/train
      md5: d0327c629f523260f1b2647575959af1.dir
      size: 711790715
      nfiles: 6651
    - path: gloves/main.py
      md5: c41c97f71eaa988cc0f527e7cd5b3620
      size: 15953
    params:
      params.yaml:
        siamese_distance:
          src: gloves/main.py
          out_model_path: artifacts/distance_models/model
          out_encoder_path: artifacts/distance_models/encoder
          out_metrics_path: siamese_distance_logs
          height: 224
          width: 224
          depth: 3
          mutate_anchor: true
          mutate_other: true
          dense_reg_rate: 0.001
          conv_reg_rate: 0.0001
          latent_nodes: 32
          final_activation: sigmoid
          lr: 0.0001
          optimizer: adam
          epochs: 1
          batch_size: 32
          verbose: 0
          eval_freq: 1
          reduce_lr_factor: 0.1
          reduce_lr_patience: 20
          early_stop_patience: 50
          mixed_precision: true
          nway_freq: 20
          nways: 32
          use_batch_norm: true
    outs:
    - path: artifacts/distance_models/encoder
      md5: d95f02396ec1cddabe51f5ea9eb8b594.dir
      size: 28291754
      nfiles: 4
    - path: artifacts/distance_models/model
      md5: a78b19b8d834ba92531d2210e369f056.dir
      size: 82327806
      nfiles: 4
    - path: siamese_distance_logs
      md5: e16c198496a8cf83d770f2f4d35b66d0.dir
      size: 598
      nfiles: 9
    - path: siamese_distance_logs.html
      md5: e81d0298ba5c1833c1ebbcd229cfba76
      size: 9554
  siamese@distance:
    cmd: "python gloves/main.py --train-dir artifacts/train --test-dir artifacts/test\
      \ --sigmoid-head false --param-path params.yaml --param-parent-key siamese --out-model-path\
      \ artifacts/models/siamese_distance/model --out-encoder-path artifacts/models/siamese_distance/encoder\
      \ --out-metrics-path logs/distance_siamese_logs\n"
    deps:
    - path: artifacts/test
      md5: 7703a0c477d6314c567eb6cbf5b5dfde.dir
      size: 79106624
      nfiles: 739
    - path: artifacts/train
      md5: d0327c629f523260f1b2647575959af1.dir
      size: 711790715
      nfiles: 6651
    - path: gloves/main.py
      md5: a5fdfb924c38ec69dce5044b531320f6
      size: 16329
    params:
      params.yaml:
        siamese:
          src: gloves/main.py
          types:
            distance:
              out_model_path: artifacts/models/siamese_distance/model
              out_encoder_path: artifacts/models/siamese_distance/encoder
              out_metrics_path: logs/distance_siamese_logs
              sigmoid_head: false
            sigmoid:
              out_model_path: artifacts/models/siamese_sigmoid/model
              out_encoder_path: artifacts/models/siamese_sigmoid/encoder
              out_metrics_path: logs/sigmoid_siamese_logs
              sigmoid_head: true
          height: 224
          width: 224
          depth: 3
          mutate_anchor: true
          mutate_other: true
          dense_layers: 0
          dense_nodes: 1024
          dense_reg_rate: 0.001
          conv_reg_rate: 0.0001
          activation: sigmoid
          latent_nodes: 32
          dropout_rate: 0.0
          final_activation: sigmoid
          lr: 0.0001
          optimizer: adam
          epochs: 1
          batch_size: 32
          verbose: 0
          eval_freq: 1
          reduce_lr_factor: 0.1
          reduce_lr_patience: 20
          early_stop_patience: 50
          mixed_precision: true
          nway_freq: 20
          nways: 32
          use_batch_norm: true
    outs:
    - path: artifacts/models/siamese_distance/encoder
      md5: c0d6b3f9f8307863f8de3009a9e22316.dir
      size: 28291754
      nfiles: 4
    - path: artifacts/models/siamese_distance/model
      md5: 7245488641c76a8ac69f1d3d2bb427a5.dir
      size: 82327806
      nfiles: 4
    - path: logs/distance_siamese_logs
      md5: 701ccb585fe8ca455b510aca3205a2d6.dir
      size: 17801
      nfiles: 12
    - path: logs/distance_siamese_logs.json
      md5: 3a1357120160d295641482c59dcb7002
      size: 348
  siamese@sigmoid:
    cmd: "python gloves/main.py --train-dir artifacts/train --test-dir artifacts/test\
      \ --sigmoid-head true --param-path params.yaml --param-parent-key siamese --out-model-path\
      \ artifacts/models/siamese_sigmoid/model --out-encoder-path artifacts/models/siamese_sigmoid/encoder\
      \ --out-metrics-path logs/sigmoid_siamese_logs\n"
    deps:
    - path: artifacts/test
      md5: 7703a0c477d6314c567eb6cbf5b5dfde.dir
      size: 79106624
      nfiles: 739
    - path: artifacts/train
      md5: d0327c629f523260f1b2647575959af1.dir
      size: 711790715
      nfiles: 6651
    - path: gloves/main.py
      md5: a5fdfb924c38ec69dce5044b531320f6
      size: 16329
    params:
      params.yaml:
        siamese:
          src: gloves/main.py
          types:
            distance:
              out_model_path: artifacts/models/siamese_distance/model
              out_encoder_path: artifacts/models/siamese_distance/encoder
              out_metrics_path: logs/distance_siamese_logs
              sigmoid_head: false
            sigmoid:
              out_model_path: artifacts/models/siamese_sigmoid/model
              out_encoder_path: artifacts/models/siamese_sigmoid/encoder
              out_metrics_path: logs/sigmoid_siamese_logs
              sigmoid_head: true
          height: 224
          width: 224
          depth: 3
          mutate_anchor: true
          mutate_other: true
          dense_layers: 0
          dense_nodes: 1024
          dense_reg_rate: 0.001
          conv_reg_rate: 0.0001
          activation: sigmoid
          latent_nodes: 32
          dropout_rate: 0.0
          final_activation: sigmoid
          lr: 0.0001
          optimizer: adam
          epochs: 1
          batch_size: 32
          verbose: 0
          eval_freq: 1
          reduce_lr_factor: 0.1
          reduce_lr_patience: 20
          early_stop_patience: 50
          mixed_precision: true
          nway_freq: 20
          nways: 32
          use_batch_norm: true
    outs:
    - path: artifacts/models/siamese_sigmoid/encoder
      md5: 5917e460ef88cd79cc251765b91d48bc.dir
      size: 28291754
      nfiles: 4
    - path: artifacts/models/siamese_sigmoid/model
      md5: 830f6730e34843839d74228535977f01.dir
      size: 82355709
      nfiles: 4
    - path: logs/sigmoid_siamese_logs
      md5: 3f8d05e0f45573a7ff41ced0287e4848.dir
      size: 17691
      nfiles: 8
    - path: logs/sigmoid_siamese_logs.json
      md5: b31f86eedd8420ebde91ad55cd9b8ac7
      size: 158
  classifiers@imagenet_unfrozen:
    cmd: "python gloves/classifier.py --encoder-model-path artifacts/models/siamese_distance/encoder\
      \ --train-dir artifacts/train --test-dir artifacts/test --param-path params.yaml\
      \ --param-parent-key classifier --out-model-path artifacts/models/imagenet_unfrozen\
      \ --out-label-encoder-path artifacts/models/imagenet_unfrozen_label_encoder.joblib\
      \ --out-metrics-path logs/imagenet_unfrozen --use-imagenet true --is-frozen\
      \ false\n"
    deps:
    - path: artifacts/models/siamese_distance/encoder
      md5: c0d6b3f9f8307863f8de3009a9e22316.dir
      size: 28291754
      nfiles: 4
    - path: artifacts/test
      md5: 7703a0c477d6314c567eb6cbf5b5dfde.dir
      size: 79106624
      nfiles: 739
    - path: artifacts/train
      md5: d0327c629f523260f1b2647575959af1.dir
      size: 711790715
      nfiles: 6651
    - path: gloves/classifier.py
      md5: 06b518f7cf97c6c3a6a62f3c18f24605
      size: 6850
    params:
      params.yaml:
        classifier:
          src: gloves/classifier.py
          types:
            imagenet_frozen:
              out_model_path: artifacts/models/imagenet_frozen
              out_label_encoder: artifacts/models/imagenet_frozen_label_encoder.joblib
              out_metrics_path: logs/imagenet_frozen
              use_imagenet: true
              is_frozen: true
            imagenet_unfrozen:
              out_model_path: artifacts/models/imagenet_unfrozen
              out_label_encoder: artifacts/models/imagenet_unfrozen_label_encoder.joblib
              out_metrics_path: logs/imagenet_unfrozen
              use_imagenet: true
              is_frozen: false
            gloves_frozen:
              out_model_path: artifacts/models/gloves_frozen
              out_label_encoder: artifacts/models/gloves_frozen_label_encoder.joblib
              out_metrics_path: logs/gloves_frozen
              use_imagenet: false
              is_frozen: true
            gloves_unfrozen:
              out_model_path: artifacts/models/gloves_unfrozen
              out_label_encoder: artifacts/models/gloves_unfrozen_label_encoder.joblib
              out_metrics_path: logs/gloves_unfrozen
              use_imagenet: false
              is_frozen: false
          batch_size: 32
          epochs: 1
          verbose: 1
    outs:
    - path: artifacts/models/imagenet_unfrozen
      md5: e715703bff076326d9899abeda0ff79a.dir
      size: 313138998
      nfiles: 4
    - path: artifacts/models/imagenet_unfrozen_label_encoder.joblib
      md5: 04389aba6461b8869ba4c8f267b430bd
      size: 1338
    - path: logs/imagenet_unfrozen
      md5: 3dca19cdd3eb82121db20a4fe13ba7d0.dir
      size: 663
      nfiles: 11
    - path: logs/imagenet_unfrozen.json
      md5: 4085698e2be72b70b45febb6c811114a
      size: 355
  classifiers@gloves_frozen:
    cmd: "python gloves/classifier.py --encoder-model-path artifacts/models/siamese_distance/encoder\
      \ --train-dir artifacts/train --test-dir artifacts/test --param-path params.yaml\
      \ --param-parent-key classifier --out-model-path artifacts/models/gloves_frozen\
      \ --out-label-encoder-path artifacts/models/gloves_frozen_label_encoder.joblib\
      \ --out-metrics-path logs/gloves_frozen --use-imagenet false --is-frozen true\n"
    deps:
    - path: artifacts/models/siamese_distance/encoder
      md5: c0d6b3f9f8307863f8de3009a9e22316.dir
      size: 28291754
      nfiles: 4
    - path: artifacts/test
      md5: 7703a0c477d6314c567eb6cbf5b5dfde.dir
      size: 79106624
      nfiles: 739
    - path: artifacts/train
      md5: d0327c629f523260f1b2647575959af1.dir
      size: 711790715
      nfiles: 6651
    - path: gloves/classifier.py
      md5: 06b518f7cf97c6c3a6a62f3c18f24605
      size: 6850
    params:
      params.yaml:
        classifier:
          src: gloves/classifier.py
          types:
            imagenet_frozen:
              out_model_path: artifacts/models/imagenet_frozen
              out_label_encoder: artifacts/models/imagenet_frozen_label_encoder.joblib
              out_metrics_path: logs/imagenet_frozen
              use_imagenet: true
              is_frozen: true
            imagenet_unfrozen:
              out_model_path: artifacts/models/imagenet_unfrozen
              out_label_encoder: artifacts/models/imagenet_unfrozen_label_encoder.joblib
              out_metrics_path: logs/imagenet_unfrozen
              use_imagenet: true
              is_frozen: false
            gloves_frozen:
              out_model_path: artifacts/models/gloves_frozen
              out_label_encoder: artifacts/models/gloves_frozen_label_encoder.joblib
              out_metrics_path: logs/gloves_frozen
              use_imagenet: false
              is_frozen: true
            gloves_unfrozen:
              out_model_path: artifacts/models/gloves_unfrozen
              out_label_encoder: artifacts/models/gloves_unfrozen_label_encoder.joblib
              out_metrics_path: logs/gloves_unfrozen
              use_imagenet: false
              is_frozen: false
          batch_size: 32
          epochs: 1
          verbose: 1
    outs:
    - path: artifacts/models/gloves_frozen
      md5: 38dda38ff7c998ebb5e87b807664b45f.dir
      size: 28958546
      nfiles: 4
    - path: artifacts/models/gloves_frozen_label_encoder.joblib
      md5: 04389aba6461b8869ba4c8f267b430bd
      size: 1338
    - path: logs/gloves_frozen
      md5: 85b3f41fe1902032ae9532433f41d7ce.dir
      size: 598
      nfiles: 11
    - path: logs/gloves_frozen.json
      md5: 968694c0381c6c319aff0ad361beaed8
      size: 290
  classifiers@imagenet_frozen:
    cmd: "python gloves/classifier.py --encoder-model-path artifacts/models/siamese_distance/encoder\
      \ --train-dir artifacts/train --test-dir artifacts/test --param-path params.yaml\
      \ --param-parent-key classifier --out-model-path artifacts/models/imagenet_frozen\
      \ --out-label-encoder-path artifacts/models/imagenet_frozen_label_encoder.joblib\
      \ --out-metrics-path logs/imagenet_frozen --use-imagenet true --is-frozen true\n"
    deps:
    - path: artifacts/models/siamese_distance/encoder
      md5: c0d6b3f9f8307863f8de3009a9e22316.dir
      size: 28291754
      nfiles: 4
    - path: artifacts/test
      md5: 7703a0c477d6314c567eb6cbf5b5dfde.dir
      size: 79106624
      nfiles: 739
    - path: artifacts/train
      md5: d0327c629f523260f1b2647575959af1.dir
      size: 711790715
      nfiles: 6651
    - path: gloves/classifier.py
      md5: 06b518f7cf97c6c3a6a62f3c18f24605
      size: 6850
    params:
      params.yaml:
        classifier:
          src: gloves/classifier.py
          types:
            imagenet_frozen:
              out_model_path: artifacts/models/imagenet_frozen
              out_label_encoder: artifacts/models/imagenet_frozen_label_encoder.joblib
              out_metrics_path: logs/imagenet_frozen
              use_imagenet: true
              is_frozen: true
            imagenet_unfrozen:
              out_model_path: artifacts/models/imagenet_unfrozen
              out_label_encoder: artifacts/models/imagenet_unfrozen_label_encoder.joblib
              out_metrics_path: logs/imagenet_unfrozen
              use_imagenet: true
              is_frozen: false
            gloves_frozen:
              out_model_path: artifacts/models/gloves_frozen
              out_label_encoder: artifacts/models/gloves_frozen_label_encoder.joblib
              out_metrics_path: logs/gloves_frozen
              use_imagenet: false
              is_frozen: true
            gloves_unfrozen:
              out_model_path: artifacts/models/gloves_unfrozen
              out_label_encoder: artifacts/models/gloves_unfrozen_label_encoder.joblib
              out_metrics_path: logs/gloves_unfrozen
              use_imagenet: false
              is_frozen: false
          batch_size: 32
          epochs: 1
          verbose: 1
    outs:
    - path: artifacts/models/imagenet_frozen
      md5: 8a774874d8794dbcf21d95b029b4b02b.dir
      size: 123579271
      nfiles: 4
    - path: artifacts/models/imagenet_frozen_label_encoder.joblib
      md5: 04389aba6461b8869ba4c8f267b430bd
      size: 1338
    - path: logs/imagenet_frozen
      md5: 558a2f4c6eb970d1397138fef2a609cb.dir
      size: 631
      nfiles: 11
    - path: logs/imagenet_frozen.json
      md5: 788af5429b8c993dcd996301a66948bd
      size: 323
  classifiers@gloves_unfrozen:
    cmd: "python gloves/classifier.py --encoder-model-path artifacts/models/siamese_distance/encoder\
      \ --train-dir artifacts/train --test-dir artifacts/test --param-path params.yaml\
      \ --param-parent-key classifier --out-model-path artifacts/models/gloves_unfrozen\
      \ --out-label-encoder-path artifacts/models/gloves_unfrozen_label_encoder.joblib\
      \ --out-metrics-path logs/gloves_unfrozen --use-imagenet false --is-frozen false\n"
    deps:
    - path: artifacts/models/siamese_distance/encoder
      md5: c0d6b3f9f8307863f8de3009a9e22316.dir
      size: 28291754
      nfiles: 4
    - path: artifacts/test
      md5: 7703a0c477d6314c567eb6cbf5b5dfde.dir
      size: 79106624
      nfiles: 739
    - path: artifacts/train
      md5: d0327c629f523260f1b2647575959af1.dir
      size: 711790715
      nfiles: 6651
    - path: gloves/classifier.py
      md5: 06b518f7cf97c6c3a6a62f3c18f24605
      size: 6850
    params:
      params.yaml:
        classifier:
          src: gloves/classifier.py
          types:
            imagenet_frozen:
              out_model_path: artifacts/models/imagenet_frozen
              out_label_encoder: artifacts/models/imagenet_frozen_label_encoder.joblib
              out_metrics_path: logs/imagenet_frozen
              use_imagenet: true
              is_frozen: true
            imagenet_unfrozen:
              out_model_path: artifacts/models/imagenet_unfrozen
              out_label_encoder: artifacts/models/imagenet_unfrozen_label_encoder.joblib
              out_metrics_path: logs/imagenet_unfrozen
              use_imagenet: true
              is_frozen: false
            gloves_frozen:
              out_model_path: artifacts/models/gloves_frozen
              out_label_encoder: artifacts/models/gloves_frozen_label_encoder.joblib
              out_metrics_path: logs/gloves_frozen
              use_imagenet: false
              is_frozen: true
            gloves_unfrozen:
              out_model_path: artifacts/models/gloves_unfrozen
              out_label_encoder: artifacts/models/gloves_unfrozen_label_encoder.joblib
              out_metrics_path: logs/gloves_unfrozen
              use_imagenet: false
              is_frozen: false
          batch_size: 32
          epochs: 1
          verbose: 1
    outs:
    - path: artifacts/models/gloves_unfrozen
      md5: 1dea23d6d24367e53a7445282856cc08.dir
      size: 82468680
      nfiles: 4
    - path: artifacts/models/gloves_unfrozen_label_encoder.joblib
      md5: 04389aba6461b8869ba4c8f267b430bd
      size: 1338
    - path: logs/gloves_unfrozen
      md5: df331cffeb65ccbc6e2dc3edf3571615.dir
      size: 630
      nfiles: 11
    - path: logs/gloves_unfrozen.json
      md5: 782e0f3191f12cb1e454b8b323223a43
      size: 322
